<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/jquery-3.1.0.min.js"></script>
		<script type="text/javascript" src="../js/Customer.js"></script>
		<link rel="stylesheet" href="../css/mui.picker.css" />
		<link rel="stylesheet" href="../css/mui.poppicker.css" />
		<script type="text/javascript" src="../js/mui.picker.js"></script>
		<script type="text/javascript" src="../js/mui.poppicker.js"></script>
		<script type="text/javascript" src="../js/city.data.js"></script>
	</head>
	<style>
	form{
		font-size:0.8em;
	}
		form a {
			color: black;
		}
		form input{
			font-size:0.8em;
		}
	</style>

	<body>
		<script type="text/javascript">
			mui.init()
		</script>
		<form class="mui-input-group" style="background: #efeff4;">
			<div class="mui-input-row">
				<label>客户名称</label>
				<input type="text" class="mui-input-clear" id="customerName">
			</div>
			<div class="mui-input-row" id="customerRoad">
				<label>				
				 <a class="mui-navigate-right">客户渠道</a>
				</label>

			</div>
			<div class="mui-input-row" id="industryCategory">
				<label><a class="mui-navigate-right">行业类别</a></label>
			</div>
			<div class="mui-input-row" id="companyNature">
				<label><a class="mui-navigate-right">企业性质</a></label>
			</div>
			<div class="mui-input-row">
				<label style="width: 35%;">年销售额</label>
				<input style="width: 45%; float: left;" type="text" class="mui-input-clear" id="NumberPeople">
				<label style="width: 20%; text-align: right;">万元</label>
			</div>
			<div class="mui-input-row">
				<label style="width: 35%;">工资总额</label>
				<input style="width: 45%; float: left;" type="text" class="mui-input-clear" id="NumberPeople">
				<label style="width: 20%; text-align: right;">万元</label>
			</div>
			<div class="mui-input-row">
				<label style="width: 35%;">企业人数</label>
				<input style="width: 45%; float: left;" type="text" class="mui-input-clear" id="NumberPeople">
				<label style="width: 20%; text-align: right;">人</label>
			</div>
			<div style="width: 100%;">
				<label style="width: 35%; float: left; line-height: 80px; text-align: left; margin-left: 15px;">公司地址</label>
				<div style="width: 60%; float: left;">
					<div class="mui-input-row">
						<input type="text" placeholder="请选择省市" class="mui-input-clear" id="Address">
					</div>
					<div class="mui-input-row">
						<input type="text" placeholder="请输入地址" class="mui-input-clear" id="deatilAddress">
					</div>
				</div>
			</div>
			<div class="mui-input-row">
				<label style="width: 40%;">企业福利计划</label>
				<div class="mui-switch" id="myswitch">
					<div class="mui-switch-handle"></div>
				</div>
			</div>
			<div class="mui-input-row" id="Plan" style="display: none;">
				<label style="width: 100%;"><a style="color: #1E90FF;" class="mui-icon mui-icon-plus"></a>福利计划</label>
			</div>

			<div class="mui-input-row" id="proxyAddress">
				<label><a class="mui-navigate-right">代理网点</a></label>
			</div>

		</form>
	</body>
	<script>
		mui.plusReady(function() {
			window.addEventListener('addCustomerForChild', function(event) {
				var dataBase = getDB();
				var cusName = $("#customerName").val()
				if(dataBase != null) {
					var PUser = plus.webview.getWebviewById("PUser.html");
					mui.fire(PUser, "Prefresh", {
						cusname: cusName
					});
				}

			});

			document.getElementById("myswitch").addEventListener("toggle", function(event) {
				if(event.detail.isActive) {
					$("#Plan").show();
					$(".addNew").show();
				} else {
					$("#Plan").hide();
					$(".addNew").hide();

				}
			})

			var numb = 1;
			$("#Plan").click(function() {
				var now = $(this);
				var add = "<div class='addNew' style='width: 100%; float: left;'><label style='width: 10%; float: left;text-align: center; margin-left: 15px;'><h3 style='line-height: 80px; '>" + numb + " </h3></label > " +
					"<div style='width: 83%; float: left;'>" +
					"<div class='mui-input-row'><label>福利计划</label><input type='text' class='mui-input-clear' id='Address'></div>" +
					"<div class='mui-input-row'><label>保险公司</label><input type='text' class='mui-input-clear' id='deatilAddress'></div></div></div>";

				var rs = $("form").children().is('.addNew'); //获取在form的子节点中是否有addNew类
				if(rs) {
					$(".addNew").last().append(add); //有，则在addNew类的最后面加add
				} else {
					now.after(add); //没有，则新建第一个addNew类
				}
				numb++;
			});

			//省市选择
			var address = document.getElementById("Address");
			address.addEventListener("tap", function() {
				var addressPicker = new mui.PopPicker({
					layer: 2
				});
				addressPicker.setData(cityData);
				addressPicker.show(function(item) {
					address.value = item[0].text + item[1].text;
				});
			});

			//客户渠道选择
			var customerRoad = document.getElementById("customerRoad");
			customerRoad.addEventListener("tap", function() {

				var roadPick = new mui.PopPicker();
				roadPick.setData([{
					value: "1",
					text: "直销"
				}, {
					value: "2",
					text: "传统寿销养"
				}]);

				roadPick.show(function(item) {
					if($("#customerRoad").children().is('span')) {
						$("#customerRoad").children('span').remove();
						$("#customerRoad").append("<span style='line-height: 40px;font-size: 0.8em;'>" + item[0].text + "</span>");

					} else {
						$("#customerRoad").append("<span style='line-height: 40px;font-size: 0.8em;'>" + item[0].text + "</span>");
					}
				});
			});

			//行业类别选择
			var industryCategory = document.getElementById("industryCategory");
			industryCategory.addEventListener("tap", function() {
				var categoryPick = new mui.PopPicker();
				categoryPick.setData(industryDate);

				categoryPick.show(function(item) {
					if($("#industryCategory").children().is('span')) {
						$("#industryCategory").children('span').remove();
						$("#industryCategory").append("<span style='line-height: 40px;font-size: 0.8em;'>" + item[0].text + "</span>");

					} else {
						$("#industryCategory").append("<span style='line-height: 40px;font-size: 0.8em;'>" + item[0].text + "</span>");
					}
				});
			});
			
			//企业性质选择
			var companyNature = document.getElementById("companyNature");
			companyNature.addEventListener("tap",function(){
				var companyPick = new mui.PopPicker();
				companyPick.setData(companyDate);
				companyPick.show(function(item){
					if($("#companyNature").children().is('span')) {
						$("#companyNature").children('span').remove();
						$("#companyNature").append("<span style='line-height: 40px;font-size: 0.8em;'>" + item[0].text + "</span>");

					} else {
						$("#companyNature").append("<span style='line-height: 40px;font-size: 0.8em;'>" + item[0].text + "</span>");
					}
				});
			});
			
			//代理选择
//			var proxyAddress = document.getElementById("proxyAddress");
//			proxyAddress.addEventListener("tap",function(){
//				var proxyPick = new mui.PopPicker();
//				
//			});
//			
		});
	</script>

</html>